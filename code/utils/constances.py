import cv2
import numpy as np
import pandas as pd


ALL_STATES = ['checkout', 'dairy', 'drinks',
              'fruit', 'spices']  # , 'entry', 'exit']

STATE_LOCATION = {
    'dairy':    [[2, 2], [3, 2], [2, 3], [3, 3], [2, 4], [3, 4], [2, 5], [3, 5], [2, 6], [3, 6]],
    'drinks':   [[6, 2], [7, 2], [6, 3], [7, 3], [6, 4], [7, 4], [6, 5], [7, 5], [6, 6], [7, 6]],
    'fruit':    [[10, 2], [11, 2], [10, 3], [11, 3], [10, 4], [11, 4], [10, 5], [11, 5], [10, 6], [11, 6]],
    'spices':   [[14, 2], [15, 2], [14, 3], [15, 3], [14, 4], [15, 4], [14, 5], [15, 5], [14, 6], [15, 6]],
    'checkout': [[3,  8]],
    'entry':    [[14, 11]],
    'exit':     [[15, 11]]
}

TILE_SIZE = 32
OFS = 50

MARKET = """
##################
##..............##
#c..bs..tO..Tv..k#
#b..ct..sT..Ou..k#
#c..bs..tO..Tv..k#
#b..ct..sT..Ou..k#
#c..bs..tO..Tv..k#
##...............#
##..C#..C#..C#...#
##..#U..##..##...#
##...............#
##############GG##
""".strip()

CORONA_MARKET = """
##################
##..............##
#c..bs..tO..Tv..e#
#b..ct..sT..Ou..e#
#c..bs..tO..Tv..k#
#b..ct..sT..Ou..e#
#c..bs..tO..Tv..e#
##...............#
##..C#..C#..C#...#
##..#g..##..##...#
##...............#
##############GG##
""".strip()

TILES = cv2.imread("./graphics/tiles.png")

# grid for the a* algorithm
GRID = np.array([
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    [1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1],
    [1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1],
    [1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1],
    [1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1],
    [1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1],
    [1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1],
    [1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1],
    [1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1],
    [1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1]])

# possible moves for the a* algorithm
POSSIBLE_MOVES = [(0, 1), (0, -1), (1, 0), (-1, 0)]

TRANSITION_MATRIX = pd.read_csv('../data/transition_matrix.csv', index_col=0)
